"DESCRIPTION","DURATION IN MS","NAME","PARENT SUITE","START TIME","STATUS","STOP TIME","SUB SUITE","SUITE","TEST CLASS","TEST METHOD"
"Test that other errors are flagged with other_error.","2","test_get_incoming_supply_other_error_handled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetIncomingSupply","test_stock_service","",""
"Test: NO_EARLY_DELIVERY mode when promise < desired_date (adjust to desired).","1","test_no_early_delivery_promise_earlier","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test: Multiple items, promise is max of all item dates.","1","test_multi_item_promise","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Verify endpoint appears in OpenAPI schema.","122","test_sales_order_details_is_in_openapi","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_order_details_endpoint","",""
"Test: IN_TRANSIT warehouse stock is ignored.","1","test_warehouse_in_transit_ignored","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test that settings loads with default values.","0","test_settings_loads_defaults","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test that PO data is transformed to expected format.","0","test_transforms_po_data_correctly","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceDataTransformation","test_stock_service","",""
"Expand list with no groups returns same list.","0","test_expand_warehouse_list_no_groups","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test: Desired date set and promise meets it → on_time=True.","1","test_desired_date_on_time","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test that port must be positive integer.","0","test_settings_port_positive_integer","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsPydanticValidation","test_config","",""
"Test circuit breaker transitions to half-open and recovers.","1","test_circuit_breaker_half_open_recovery","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestCircuitBreakerHalfOpen","test_additional_coverage","",""
"Test _safe_float with all data types and edge cases.","1","test_safe_float_conversion","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyServiceParsing","test_mock_supply_service","",""
"Test: Partial from stock, rest from PO → MEDIUM confidence.","1","test_promise_partial_stock","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test: Options (split_shipment, expedite_po) generated when promise misses desired_date.","1","test_options_generated_when_late","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[None-None-2024-01-01-None-None-10-0]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Cutoff on Thursday should add 1 working day (skip to Sunday).","0","test_cutoff_on_thursday_adds_working_day","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestCutoffRuleWithCalendar","test_calendar_workweek","",""
"Test handling of non-standard response formats.","4","test_response_edge_cases","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientResponseEdgeCases","test_erpnext_client","",""
"Test health check exception handling.","3","test_health_check_with_exception","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test health check handles exceptions gracefully.","3","test_health_check_handles_exception","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestHealthCheckEndpoint","test_main","",""
"Test 400 when item_code is empty string.","3","test_get_stock_empty_item_code","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test working day detection for Sunday-Thursday workweek.","0","test_is_working_day","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestCalendarUtilities","test_calendar_workweek","",""
"Test: LATEST_ACCEPTABLE mode when promise <= desired_date (on time).","0","test_latest_acceptable_on_time","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test that zero stock is handled correctly.","1","test_zero_stock_handled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceEdgeCases","test_stock_service","",""
"Detect group warehouses correctly.","0","test_is_group_warehouse","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test health check when mock supply is enabled.","4","test_health_with_mock_supply_enabled","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestHealthEndpointMockSupply","test_endpoints","",""
"Test that ERPNext 404 maps to 404 response.","4","test_sales_order_details_returns_404_on_missing","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_order_details_endpoint","",""
"Test all query parameters are correctly passed to client.","5","test_query_params_mapping","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Note: Caching behavior is tested in integration tests.","0","test_sales_orders_cache_documented","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrdersEndpointCaching","test_endpoints","",""
"Test procurement suggestion handles ERPNext errors.","9","test_procurement_suggestion_erpnext_error","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestProcurementSuggestionErrorHandling","test_additional_coverage","",""
"Test generic Exception handling in apply_promise.","5","test_apply_promise_generic_exception","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test health check returns healthy when ERPNext is connected.","8","test_health_check_success_when_erpnext_connected","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestHealthCheckEndpoint","test_main","",""
"Expand list with group warehouse.","0","test_expand_warehouse_list_with_group","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test: Item override has highest priority in hierarchy.","0","test_processing_lead_time_hierarchy_item_beats_all","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Test procurement suggestion handles generic errors.","5","test_procurement_suggestion_generic_error","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestProcurementSuggestionErrorHandling","test_additional_coverage","",""
"Test that item codes are passed exactly as provided (case-sensitive).","4","test_get_stock_case_sensitive_item_code","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Reasons should mention weekend adjustment.","1","test_weekend_adjustment_reason_included","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestPromiseCalculationWithCalendar","test_calendar_workweek","",""
"Expand list and remove duplicates.","0","test_expand_warehouse_list_deduplicate","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[None-None-None-2024-02-01-None-10-0]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test: LATEST_ACCEPTABLE mode when promise > desired_date (late).","2","test_latest_acceptable_late","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test: Processing lead time applied to PO delivery dates.","0","test_processing_lead_time_with_po","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Test basic endpoint format.","0","test_sales_orders_empty_list_format","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrdersEndpointEmptyResults","test_endpoints","",""
"Test generic exception handling in get_sales_order_detail.","4","test_get_sales_order_detail_generic_exception","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test get_sales_order_list with various parameter combinations.","4","test_get_sales_order_list_with_parameters[None-None-None-None-None-50-100]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test 422 when warehouse parameter is missing.","3","test_get_stock_missing_warehouse","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that item warehouse is used as fallback.","4","test_sales_order_details_uses_item_warehouse_fallback","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrderDetailsEndpointDefaultsHandling","test_endpoints","",""
"Test that leading/trailing whitespace is handled correctly.","4","test_get_stock_whitespace_handling","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test 422 validation error response format.","4","test_422_validation_error_format","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestErrorResponseFormats","test_main","",""
"Test: When some items available and desired date missed → suggest split shipment.","0","test_split_shipment_option","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test that schedule_date can be a date object and after_date filtering works.","2","test_handles_date_type_schedule_date","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceEdgeCases","test_stock_service","",""
"Test applying promise with custom comment text.","1","test_apply_promise_with_custom_comment_text","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceSuccessPath","test_apply_service","",""
"Test material request creation with empty items list.","1","test_empty_items_list_material_request","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceEdgeCases","test_apply_service","",""
"Test that None rules defaults to PromiseRules().","1","test_calculate_promise_with_none_rules","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseServiceEdgeCases","test_promise_service","",""
"Test that validation errors return 422.","4","test_apply_validation_error_returns_422","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestApplyEndpointErrorHandling","test_endpoints","",""
"Expand group warehouse with no children defined.","0","test_expand_group_no_children","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test custom warehouse classifications and finished goods/scrap.","0","test_custom_classifications","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseClassification","test_warehouse_handling","",""
"Test: Weekend rules applied after processing lead time.","1","test_processing_lead_time_with_weekends","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Test that non-404 ERPNext errors are mapped to 502.","4","test_non_404_error_mapped_to_502","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestERPNextErrorMapping","test_endpoints","",""
"Test response with zero stock values.","4","test_get_stock_zero_values","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test 404 error response format.","2","test_404_not_found_format","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestErrorResponseFormats","test_main","",""
"Test: NO_EARLY_DELIVERY mode delays promise to match desired date.","0","test_no_early_delivery_mode","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test classification of different warehouse types.","0","test_warehouse_type_classifications","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseClassification","test_warehouse_handling","",""
"Test that validation errors return 422 Unprocessable Entity.","80","test_promise_validation_error_returns_422","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestPromiseEndpointErrorHandling","test_endpoints","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[None-Draft-None-None-None-10-0]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test incoming supply with no POs.","1","test_get_incoming_supply_empty","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetIncomingSupply","test_stock_service","",""
"Test _parse_stock_row with valid and invalid data.","1","test_parse_stock_rows_edge_cases","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyServiceParsing","test_mock_supply_service","",""
"Test bin details with wrapped data, empty response, and direct list.","7","test_bin_details_various_responses","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientBinDetails","test_erpnext_client","",""
"Test applying promise with different confidence levels.","3","test_apply_promise_with_all_confidence_levels","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceEdgeCases","test_apply_service","",""
"Test that docs endpoint is available.","2","test_docs_endpoint_available","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestAppSetup","test_main","",""
"Test that ERPNext errors are handled.","1","test_get_available_stock_erpnext_error_handled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetAvailableStock","test_stock_service","",""
"Expand list without deduplication keeps duplicates.","0","test_expand_no_deduplicate","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test that endpoints return 422 for validation errors.","4","test_endpoint_validation_errors[/otp/procurement-suggest-request_data2-422-None]","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRoutesErrorHandling","test_main","",""
"Test graceful handling when data file is missing.","0","test_missing_data_file","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyService","test_mock_supply_service","",""
"Test: Warehouse-specific processing lead time overrides default.","0","test_processing_lead_time_warehouse_override","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Stock in Goods In Transit should NOT be available immediately.","0","test_in_transit_stock_not_available_now","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseCalculationWithWarehouses","test_warehouse_handling","",""
"Test handling of invalid JSON and ERPNext error responses.","9","test_handles_malformed_and_error_responses","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientMalformedResponses","test_erpnext_client","",""
"Test ERPNextClientError handling in apply_promise.","4","test_apply_promise_erpnext_error","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test adding a comment to a document.","2","test_add_comment_to_doc","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientComments","test_erpnext_client","",""
"Test custom warehouse hierarchy.","0","test_custom_hierarchy","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseClassification","test_warehouse_handling","",""
"Filter warehouses by type.","0","test_filter_available_warehouses","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test that different warehouses make separate calls.","1","test_different_warehouses_separate_calls","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceMultipleWarehouseScenarios","test_stock_service","",""
"Test material request creation with priority.","1","test_create_material_request_with_priority","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceCreateMaterialRequest","test_apply_service","",""
"Test that endpoint calls correct ERPNext Bin doctype.","4","test_get_stock_calls_correct_doctype","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test: Warehouse classified as NEEDS_PROCESSING adds extra day.","0","test_warehouse_needs_processing","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"
    Test that GET /otp/sales-orders endpoint is registered and not 404.
    Verifies endpoint is properly exposed in FastAPI.
    ","5","test_sales_orders_endpoint_exists_and_not_404","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Test get_controller branch with mock supply enabled.","0","test_get_controller_with_mock_supply","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test _parse_po_row with valid and invalid data.","1","test_parse_po_rows_edge_cases","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyServiceParsing","test_mock_supply_service","",""
"Promise date should never land on Friday or Saturday.","0","test_promise_date_never_weekend","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseCalculationWithWarehouses","test_warehouse_handling","",""
"Test applying promise with comment only.","1","test_apply_promise_with_comment_only","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceSuccessPath","test_apply_service","",""
"Test: All items available in stock → HIGH confidence, immediate promise.","1","test_promise_all_from_stock","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test ERPNext connection configuration exists.","0","test_settings_erpnext_connection_config","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test 405 method not allowed response format.","2","test_405_method_not_allowed_format","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestErrorResponseFormats","test_main","",""
"Test that available_qty is calculated as actual - reserved.","1","test_calculates_available_qty_correctly","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceDataTransformation","test_stock_service","",""
"If today is Friday, base_date should be Sunday when no_weekends=True.","0","test_base_date_friday_moves_to_sunday","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestPromiseCalculationWithCalendar","test_calendar_workweek","",""
"Test 422 when item_code parameter is missing.","3","test_get_stock_missing_item_code","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that empty results are returned correctly.","4","test_empty_response","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Test that ERPNext API credentials exist.","0","test_settings_api_key_required","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test: PO data access denied due to permissions → handles gracefully.","1","test_po_access_permission_denied","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test that supply is filtered by after_date parameter.","1","test_filters_supply_by_after_date","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceEdgeCases","test_stock_service","",""
"Test that health check response has all required fields.","7","test_health_check_response_has_all_fields","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestHealthCheckResponseModel","test_main","",""
"Test response with negative available stock (over-reserved).","4","test_get_stock_negative_available","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that unsupported suggestion types return error.","0","test_create_unsupported_suggestion_type","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceCreateMaterialRequest","test_apply_service","",""
"Test that GROUP warehouse triggers warning in _build_item_plan.","29","test_group_warehouse_passed_to_build_item_plan","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestGroupWarehouseWarning","test_additional_coverage","",""
"Test that shutdown event handler is configured.","0","test_shutdown_event_configured","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStartupShutdownEvents","test_main","",""
"Test: STRICT_FAIL mode when promise <= desired_date (succeeds).","0","test_strict_fail_on_time","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test _parse_po_row_from_row with enriched and standard columns.","1","test_parse_po_row_from_row_all_cases","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyServiceParsing","test_mock_supply_service","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[CUST-001-None-None-None-None-10-0]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test that POs without schedule_date are skipped.","1","test_skips_pos_without_schedule_date","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceEdgeCases","test_stock_service","",""
"Test that OTP router endpoints are accessible.","3","test_otp_router_included","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRouterInclusion","test_main","",""
"Test applying promise with both comment and custom field.","2","test_apply_promise_with_both_actions","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceSuccessPath","test_apply_service","",""
"Test material request creation error handling.","1","test_create_material_request_handles_error","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceCreateMaterialRequest","test_apply_service","",""
"Test: NO_EARLY_DELIVERY mode when promise > desired_date (late, not adjusted).","1","test_no_early_delivery_promise_later","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test that error detail is included in development mode.","2","test_global_exception_handler_detail_in_development","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestGlobalExceptionHandler","test_main","",""
"Test that settings values are consistent.","1","test_settings_immutable_behavior","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestGlobalSettingsInstance","test_config","",""
"Test that get_controller uses MockSupplyService when enabled.","2","test_get_controller_with_mock_supply_enabled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRoutesDependencyInjection","test_main","",""
"Test stock retrieval for same item in different warehouses.","9","test_get_stock_multiple_warehouses","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test get_stock_balance with and without warehouse parameter.","4","test_get_stock_balance_with_and_without_warehouse","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientStockBalance","test_erpnext_client","",""
"Test availability reasons for all warehouse types.","0","test_warehouse_availability_reasons","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseAvailabilityReasons","test_warehouse_handling","",""
"Test after_date filter and warehouse-specific queries.","1","test_date_filtering_and_warehouse_handling","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyService","test_mock_supply_service","",""
"Test health check returns False on error.","2","test_health_check_failure_on_error","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientHealthCheck","test_erpnext_client","",""
"Test warehouse-related settings.","0","test_settings_warehouse_configuration","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test error when sales order doesn't exist.","2","test_sales_order_not_found_returns_error","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceErrorHandling","test_apply_service","",""
"Test generic Exception handling in calculate_promise.","6","test_calculate_promise_generic_exception","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test: Warehouse override has higher priority than rule-level override.","1","test_processing_lead_time_rule_override","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Test material request with single item.","1","test_material_request_with_single_item","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceEdgeCases","test_apply_service","",""
"Test updating a custom field on Sales Order.","2","test_update_custom_field","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientUpdateCustomField","test_erpnext_client","",""
"Test next_working_day from various starting days.","0","test_next_working_day_scenarios","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestCalendarUtilities","test_calendar_workweek","",""
"Test material request creation with success, non-dict response, and empty items.","7","test_create_material_request_various_scenarios","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientMaterialRequest","test_erpnext_client","",""
"Test successful material request creation.","1","test_create_material_request_success","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceCreateMaterialRequest","test_apply_service","",""
"Test that settings instance is globally accessible.","1","test_settings_is_singleton_like","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestGlobalSettingsInstance","test_config","",""
"Verify endpoint appears in OpenAPI schema.","3","test_sales_orders_is_in_openapi","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Test response matches required schema.","5","test_sales_order_details_response_format_matches_contract","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_order_details_endpoint","",""
"Test that HTTP errors trigger circuit breaker and proper error handling.","4","test_handles_http_errors","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientHTTPErrors","test_erpnext_client","",""
"Test: Desired date set but promise is late → suggestions offered.","1","test_desired_date_late","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test: Promise date adjusted to skip weekends (Fri-Sat).","0","test_skip_weekends","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test delivery model setting.","0","test_settings_delivery_model","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test that test credentials are configured.","0","test_settings_test_credentials_available","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test response matches required schema - plain array of items.","4","test_sales_orders_response_format_matches_contract","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Test: STRICT_FAIL mode when promise > desired_date (raises ValueError).","1","test_strict_fail_late_raises_error","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test that endpoints return 422 for validation errors.","24","test_endpoint_validation_errors[/otp/promise-request_data0-422-None]","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRoutesErrorHandling","test_main","",""
"Test 400 when warehouse is empty string.","3","test_get_stock_empty_warehouse","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test with only actual_qty field present.","4","test_get_stock_only_actual_qty","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that ERPNext URL is properly constructed.","1","test_erpnext_url_construction","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceEdgeCases","test_apply_service","",""
"Test that POs are sorted by expected_date when retrieved.","1","test_po_sorting_and_retrieval","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyServiceParsing","test_mock_supply_service","",""
"Test that /otp/promise endpoint is registered.","3","test_promise_endpoint_registered","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestEndpointRegistration","test_main","",""
"Test: Item-specific processing lead time overrides warehouse override.","0","test_processing_lead_time_item_override","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[None-None-None-None-SO--10-0]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test that OTPController.create_procurement_suggestion properly delegates to apply_service.","1","test_create_procurement_suggestion_controller_method","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestOTPControllerIntegration","test_main","",""
"Test that unexpected exceptions are propagated (or handled if not wrapped).","1","test_get_available_stock_exception_handled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetAvailableStock","test_stock_service","",""
"Test that stock fetch failures are handled gracefully.","8","test_sales_order_details_stock_fetch_failure_handled","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrderDetailsEndpointStockDataHandling","test_endpoints","",""
"Test handling of missing qty fields in ERPNext response.","4","test_get_stock_missing_qty_fields","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test successful stock retrieval for valid item + warehouse.","5","test_get_stock_success","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that endpoints return 422 for validation errors.","4","test_endpoint_validation_errors[/otp/apply-request_data1-422-None]","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRoutesErrorHandling","test_main","",""
"Test: no_weekends=False allows weekend delivery dates.","0","test_no_weekends_false","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test successful stock retrieval.","1","test_get_available_stock_success","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetAvailableStock","test_stock_service","",""
"Test validation on procurement suggest endpoint.","4","test_procurement_suggest_validation","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestProcurementSuggestEndpoint","test_endpoints","",""
"Test that context manager properly enters and exits.","1","test_context_manager_enter_exit","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientContextManager","test_erpnext_client","",""
"Test business rule defaults are sensible.","0","test_settings_business_rule_defaults","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test that demo_data router endpoints are accessible.","3","test_demo_data_router_included","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRouterInclusion","test_main","",""
"Test that /otp/sales-orders/{sales_order_id} endpoint is registered.","3","test_sales_order_details_endpoint_registered","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestEndpointRegistration","test_main","",""
"Test applying promise with custom field only.","1","test_apply_promise_with_custom_field_only","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceSuccessPath","test_apply_service","",""
"Test 500 on unexpected exception.","4","test_get_stock_unexpected_exception","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that deployment environment can be configured.","0","test_settings_deployment_environments","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsConfiguration","test_config","",""
"Test desired date analysis fallback path.","1","test_desired_date_fallback_return","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseServiceEdgeCases","test_promise_service","",""
"Test: Promise date changes when stock availability changes.","1","test_dynamic_recalculation_stock_change","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"
    CRITICAL: Verify doctype is NOT sent in query params.
    ERPNext get_list() fails if doctype is passed both in URL and params.
    ","6","test_erpnext_client_does_not_send_doctype_twice","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Test health check returns degraded when ERPNext is disconnected.","3","test_health_check_degraded_when_erpnext_disconnected","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestHealthCheckEndpoint","test_main","",""
"Test sales orders cache returns cached data.","4","test_sales_orders_cache_hit","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test that confidence field update failure is silently ignored.","1","test_confidence_field_failure_ignored","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceErrorHandling","test_apply_service","",""
"Test scrap and reject warehouses are NOT_AVAILABLE.","0","test_scrap_reject_pattern","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseClassification","test_warehouse_handling","",""
"Test that lead time buffer is non-negative.","0","test_settings_lead_time_non_negative","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsPydanticValidation","test_config","",""
"Test 404 when ERPNext returns 404 error.","4","test_get_stock_erpnext_404_error","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test response unwrapping for data, message, and raw responses.","5","test_response_unwrapping","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientSuccessfulResponses","test_erpnext_client","",""
"Test case-insensitive lookup and PO sorting.","0","test_case_insensitive_and_sorting","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyService","test_mock_supply_service","",""
"Note: Timeout handling is covered by integration tests.","0","test_timeout_handling_documented","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientTimeoutHandling","test_erpnext_client","",""
"Test handling of decimal quantity values.","4","test_get_stock_decimal_values","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that ERPNext errors return 502 Bad Gateway, not 503.","4","test_erpnext_error_returns_502_not_503","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_orders_endpoint","",""
"Test that CORS headers are present in responses.","2","test_cors_headers_present","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestCORSMiddleware","test_main","",""
"Test that close method doesn't close the shared global client.","1","test_close_method","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientContextManager","test_erpnext_client","",""
"Test that shutdown event logs shutdown message.","3","test_shutdown_event_logs_message","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStartupAndShutdownEvents","test_main","",""
"Test that /otp/apply endpoint is registered.","2","test_apply_endpoint_registered","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestEndpointRegistration","test_main","",""
"Test sales order list with wrapped, direct, and non-list responses.","6","test_sales_order_list_various_responses","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientSalesOrderList","test_erpnext_client","",""
"Test: Default processing lead time (1 day) is applied.","0","test_processing_lead_time_default","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestProcessingLeadTime","test_processing_lead_time","",""
"Test that set_warehouse is used for defaults.","4","test_sales_order_details_uses_set_warehouse","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrderDetailsEndpointDefaultsHandling","test_endpoints","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[CUST-001-Draft-2024-01-01-2024-02-01-SO--100-50]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test that health check version matches app version.","31","test_health_check_version_consistency","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestHealthCheckResponseModel","test_main","",""
"Test PO response transformation, empty list, and non-list response.","9","test_incoming_po_various_responses","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientPurchaseOrders","test_erpnext_client","",""
"Test that comment failure doesn't stop other actions.","1","test_comment_failure_continues_with_warning","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceErrorHandling","test_apply_service","",""
"Test that redoc endpoint is available.","2","test_redoc_endpoint_available","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestAppSetup","test_main","",""
"PO arriving on Friday or Saturday should be adjusted to Sunday.","0","test_po_arrival_weekend_adjustment","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestIncomingSupplyWeekendAdjustment","test_calendar_workweek","",""
"Test that promise endpoint is registered.","0","test_promise_endpoint_exists","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestPromiseEndpointSuccessPath","test_endpoints","",""
"Test that limit is clamped to maximum of 100.","4","test_sales_orders_limit_clamped_to_100","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrderListFilters","test_endpoints","",""
"Test successful health check and circuit breaker operations.","2","test_health_check_success","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientHealthCheck","test_erpnext_client","",""
"Test generic exception handling in list_sales_orders.","5","test_list_sales_orders_generic_exception","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test that startup event logs environment information.","2","test_startup_event_logs_environment","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStartupAndShutdownEvents","test_main","",""
"Test ERPNextClientError handling in calculate_promise.","4","test_calculate_promise_erpnext_error","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestOTPEndpointExceptionHandlers","test_endpoints","",""
"Test empty warehouse name defaults to SELLABLE.","0","test_empty_warehouse_name","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseClassification","test_warehouse_handling","",""
"Test successful incoming supply retrieval.","1","test_get_incoming_supply_success","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetIncomingSupply","test_stock_service","",""
"Processing lead time should count only working days.","0","test_processing_lead_time_counts_working_days","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestPromiseCalculationWithCalendar","test_calendar_workweek","",""
"Stock in Work In Progress should be ignored.","0","test_wip_stock_ignored","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseCalculationWithWarehouses","test_warehouse_handling","",""
"Test that /otp/sales-orders endpoint is registered.","3","test_sales_orders_endpoint_registered","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestEndpointRegistration","test_main","",""
"Test that negative reserved qty doesn't cause issues.","1","test_negative_reserved_qty_handled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceEdgeCases","test_stock_service","",""
"Test: on_time flag changes when stock/supply changes relative to desired_date.","1","test_dynamic_recalculation_with_desired_date","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test adding working days in various scenarios.","0","test_add_working_days_scenarios","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestCalendarUtilities","test_calendar_workweek","",""
"Test health check when stock balance check raises exception.","3","test_health_exception_during_stock_balance_check","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestHealthEndpointMockSupply","test_endpoints","",""
"Stock in Stores should be available immediately.","1","test_sellable_warehouse_available_immediately","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseCalculationWithWarehouses","test_warehouse_handling","",""
"Unmapped warehouses should match by pattern.","0","test_pattern_matching","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseClassification","test_warehouse_handling","",""
"Test get_sales_order_list with various parameter combinations.","2","test_get_sales_order_list_with_parameters[CUST-001-Draft-2024-01-01-2024-02-01-None-10-0]","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientSalesOrderListParameters","test_erpnext_client","",""
"Test that custom field failure is handled gracefully.","2","test_custom_field_failure_handled_gracefully","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestApplyServiceErrorHandling","test_apply_service","",""
"When no_weekends=False, Friday and Saturday should be allowed.","0","test_no_weekends_false_allows_friday_saturday","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestPromiseCalculationWithCalendar","test_calendar_workweek","",""
"Test that important string fields are not empty.","0","test_settings_string_fields_not_empty","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestSettingsPydanticValidation","test_config","",""
"Test that GET /otp/sales-orders/{id} endpoint is registered and not 404.","5","test_sales_order_details_endpoint_exists_and_not_404","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_order_details_endpoint","",""
"Test that get_controller uses StockService when mock is disabled.","1","test_get_controller_with_stock_service_fallback","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestRoutesDependencyInjection","test_main","",""
"Test that ERPNext errors return 502 Bad Gateway.","5","test_sales_order_details_returns_502_on_erpnext_error","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_order_details_endpoint","",""
"Test that missing required fields return 422.","4","test_promise_missing_required_field_returns_422","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestPromiseEndpointErrorHandling","test_endpoints","",""
"Test handling of very large quantities.","0","test_very_large_quantities","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceEdgeCases","test_stock_service","",""
"Test that no stock fetch occurs when warehouse is missing.","4","test_sales_order_details_no_warehouse_no_stock_fetch","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrderDetailsEndpointStockDataHandling","test_endpoints","",""
"Promise date must never land on Friday or Saturday.","0","test_promise_date_never_weekend","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestPromiseCalculationWithCalendar","test_calendar_workweek","",""
"Test that httpx.ReadTimeout is properly retried and raises RetryError.","3003","test_timeout_exception_handling","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestERPNextClientTimeoutException","test_erpnext_client","",""
"Test that app has correct title and version.","0","test_app_title_and_version","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestAppSetup","test_main","",""
"Test loading CSV and various queries.","1","test_with_existing_csv_and_queries","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestMockSupplyService","test_mock_supply_service","",""
"Test that stock metrics are optional (backward compatibility).","5","test_sales_order_details_stock_metrics_are_optional","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","","test_sales_order_details_endpoint","",""
"Test get_available_stock when no warehouse is specified.","1","test_get_available_stock_no_warehouse_parameter","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetAvailableStock","test_stock_service","",""
"Test: PO expected date falls on weekend → adjusted to next working day.","0","test_po_falls_on_weekend_adjusted","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test that all query filters are passed to ERPNext client.","8","test_sales_orders_with_all_filters","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestSalesOrderListFilters","test_endpoints","",""
"Test that startup event is triggered (indirectly).","0","test_startup_event_logs_info","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStartupShutdownEvents","test_main","",""
"Test that ERPNext 404 errors are mapped to HTTP 404.","4","test_404_error_mapped_correctly","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestERPNextErrorMapping","test_endpoints","",""
"Test that quantity values are converted to float.","4","test_get_stock_response_type_conversion","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test 502 when ERPNext returns other error.","4","test_get_stock_erpnext_502_error","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test: All from incoming PO → MEDIUM confidence.","1","test_promise_no_stock","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test that permission errors are flagged with access_error.","1","test_get_incoming_supply_permission_error_handled","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestStockServiceGetIncomingSupply","test_stock_service","",""
"Test: When no desired_date, on_time should be None.","0","test_no_desired_date_provided","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestDesiredDateHandling","test_desired_date","",""
"Test: Insufficient supply → LOW confidence, has shortage.","0","test_promise_shortage","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseService","test_promise_service","",""
"Test get_value returns None for empty results.","8","test_get_value_with_empty_response","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestERPNextClientGetValueEdgeCases","test_additional_coverage","",""
"Get children of group warehouse.","0","test_get_child_warehouses","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestWarehouseGroupExpansion","test_warehouse_handling","",""
"Test that CORS allows configured origins.","3061","test_cors_allows_origins","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestCORSMiddleware","test_main","",""
"Test 404 when item doesn't exist in warehouse.","4","test_get_stock_item_not_found","tests.api","Sun Feb 08 12:00:12 UTC 2026","passed","Sun Feb 08 12:00:12 UTC 2026","TestItemStockEndpoint","test_items_endpoint","",""
"Test that OpenAPI schema is available.","124","test_openapi_schema_available","tests.unit","Sun Feb 08 12:00:06 UTC 2026","passed","Sun Feb 08 12:00:06 UTC 2026","TestAppSetup","test_main","",""
"Test OTP health endpoint returns mock supply message.","3","test_otp_health_check_with_mock_supply","tests.unit","Sun Feb 08 12:00:03 UTC 2026","passed","Sun Feb 08 12:00:03 UTC 2026","TestOTPHealthCheckMockSupply","test_additional_coverage","",""
"Reasons should explain warehouse-based decisions including GROUP warehouse handling.","1","test_reasons_explain_warehouse_decisions","tests.unit","Sun Feb 08 12:00:10 UTC 2026","passed","Sun Feb 08 12:00:10 UTC 2026","TestPromiseCalculationWithWarehouses","test_warehouse_handling","",""
